# Сервис для работы с ПВЗ

Сервис предоставляет API для работы с ПВЗ, включая создание ПВЗ, открытие и закрытие приемки товаров, добавление и удаление товаров, а также получения информации о существующих ПВЗ.

## Технологии

- `Go` — основной язык разработки.
- `PostgreSQL` — база данных.
- `Docker` — контейнеризация приложения.
- `gRPC` — реализация дополнительного задания.

## Установка и запуск

1. Клонировать репозиторий:

```
git clone https://github.com/KulaginNikita/pvz-service
```
2. Перейти в корень проекта и запустить сервис:

```
docker-compose up -d
```

## Доступные порты

- `REST API` (Основной сервис) — 8080
- `gRPC API` (Дополнительный сервис) — 3000

## Описание реализации

Сервис построен по принципам слоистой архитектуры, код разделен на три уровня:

- `api` — слой внешнего взаимодействия
- `service` — бизнес-логика
- `repository` — слой доступа к данным

Слои взаимодействуют через интерфейсы, что обеспечивает слабую связность и упрощает unit-тестирование и масштабирование сервиса.

### Используемые инструменты и подходы:
- Stateless-аутентификация на основе `JWT`-токенов
- Логирование HTTP-запросов с использованием стандартной библиотеки `slog`
- `Goose` — управление SQL-миграциями
- `Squirrel` — безопасная генерация SQL-запросов без ORM
- `Minimock` — генерация моков для unit-тестов по интерфейсам
- Кодогенерация:
  - `oapi-codegen` — генерация DTO и chi-маршрутов по OpenAPI-спецификации
  - `protoc` с плагинами `protoc-gen-go` и `protoc-gen-go-grpc` — генерация gRPC-контрактов и реализаций
## Тестирование

- Unit-тесты покрывают все функции `api` и `service` слоев.
- Интеграционный тест проверяет полный рабочий цикл:
  - Создание ПВЗ
  - Инициация приёмки
  - Добавление 50 товаров
  - Закрытие приёмки
